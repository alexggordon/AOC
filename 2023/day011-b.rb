#!/Users/alexggordon/.rbenv/shims/ruby
require 'active_support/all'
require 'pry-byebug'
input = <<-AOC
.......#...........................................................................#........................................................
.............#...........#..................#.............................................................#..............#.......#..........
..................................................................#.........#......................................#........................
.................#...........................................................................................................#..............
.............................................................#..............................................................................
......................#.....................................................................#............................................#..
.....#...........................................#..........................................................................................
............................#..........................................#...............................#....................................
...........#......................................................................................#......................#..................
....................................................#.....#................................................#......................#.........
#..................................................................#.............#...........................................#..............
......................................#..................................................#...............................................#..
.................................#..........................................................................................................
...............#........#..............................................#...............................................#....................
.......#....................................................................................................................................
............................................................................#...................#..................#.......#.........#......
...................#......................#......#.......#.......#..........................................................................
............#...........................................................................#................#..................................
.....................................................#..................#................................................................#..
.............................#.....#..........................................................................#...................#.........
...#.......................................................#...............................#................................................
............................................#........................................................#......................................
...................................................................#..................................................................#.....
..........................................................................................................................#.................
#.......................#............................#.......................................#..............................................
..........................................#.................#.....................................#................................#........
..................#............................................................#........................#..............#....................
............................................................................................................................................
......#........................................................................................#.............................#..............
...............#........................#.........#.....#......#...................#..............................#.........................
.........................#.....#..........................................#.................................................................
.................................................................................................................................#..........
...........................................................#..................................................#..........#............#.....
.............#.................................................................#............................................................
.....................#............#..............#.......................................#..................................................
#..........................#...........................#..................................................#.................................
.............................................................#....................................................................#.......#.
......................................................................................................................#.....................
............#..................#...........#........#...............................#..............#...........#............................
.......#..............................#.....................................................................................................
........................#...............................................................#..............#.................#.............#....
.#..........................................................................................................#...............................
.........................................................#.....................#.................................................#..........
..........................................#..........................................#...........................#.........................#
.....#..........................#.................#..........#........#.....................................................................
..........#...........#.................................................................................#...................................
.............................................................................................................................#.......#......
..........................................................#.................#............#..................................................
.....................................................#..........................................#...........#...............................
.......................................#...............................#.............................#......................................
..................................#...............................................#........................................#.............#..
.......#.......#.......#..........................................#.........................................................................
.............................................#...............#..............................................................................
............................#................................................................#..............................................
........................................................#..................#.............................#........................#.........
...................................................................................................#..........#.............................
......#............................................................................#....................................#..................#
..................#.....#...............#.....#......#...................................#.....................................#............
..................................................................#...........#.............................................................
#.............#..........................................#...............#...................#.........#....................................
........#.............................................................................................................#.............#.......
......................#......................................#............................................................................#.
..............................#....................................................#........................................................
............................................................................................................................................
...............#.............................................................................................#..............................
........................#............#............................#................................................................#........
...#.....................................................#................#..............#...................................#..............
.............................................#..............................................................................................
...........................#................................................................................................................
.....................................................#......#....................................................#.....#....................
.....#....................................#.....#...........................#...................#...........................................
..............#.....................#...................................................................#...................................
#........................................................................................#..................................................
.....................#........................................................................................#.............................
..........................#.......................#..................................................................................#......
.........#................................................#.........#.......................................................#...............
...............................#................................................................#.....#.....................................
...................#..........................#.................#..................#..............................................#.........
......#......#..............................................................................................................................
............................#......................................................................#........#...............................
....................................................................................................................#.......................
................................................#...........#.................#........................#....................................
.................#..........................................................................................................................
..........................#......................................................................................#..........#..........#....
#...............................................................................................#.....................#.....................
............#......................#...................#.................................#.........................................#........
............................................................................................................................................
....................................................................#.......................................................................
.....#........................................#...........................................................#...................#.............
..........................................................#..................................#..............................................
.............................#............................................#.................................................................
......................#............................................................................................................#........
..#.....................................................................................................................................#...
...........#..........................#............................................................................#........................
..............................................#.................#....................#...............#........#.............................
...........................#...........................#......................................#...........................#.....#...........
.........................................................................................................#..................................
.........#......#................................................................................................#........................#.
...#.....................................................................#..............#...................................................
.............................#......#...............................#................................................#......................
.........................................#............................................................................................#.....
.....................#............................#............#.................#...........................#...............#..............
.............#..........................................#...................................#...............................................
..#.............................#...........................................#.....................#................#........................
...........................................#...........................#.................................................#..............#...
........#...........................#.......................#.......................#.......................................................
...........................#.............................................................................#.......................#..........
............................................................................................................................................
...............#...............................................................................#..........................................#.
............................................................................................................................................
#...............................................#......#.......#...............#............................................................
.........#.................................#...........................................................#....................................
......................................#............................#...............................................#........................
......................#.........#.............................................................................#.............................
....................................................................................#............#..........................................
..........................................................................#...............#.................................................
...........#.....#................................#.........................................................................#...............
..................................................................#.......................................#.........................#.......
.........................#................................#........................................................#........................
........#...................................................................................#......#....................................#...
...............................................................#...............#............................................................
.............................................#.........................#.....................................#..............................
...................#...............#........................................................................................................
..........................#..............................#....................................#..................................#..........
...........#.....................................................................#.....#....................................................
...#.................................................#...............................................#...........#...........#..............
...............#........................#................................................................................................#..
....................#..............................................#.....................................#..................................
..................................#.....................#................................#..................................................
............................................#...................................................#.............#.............................
........................................................................................................................#.....#......#.....#
...........................................................#..................#......................#......................................
...................#.........#....................................#.........................#...............................................
....................................................#...............................................................#.......................
.............#........................#....................................................................................#................
....................................................................................#...................................................#...
.......#................................................#................#..................................................................
.#.................................................................#..............................................................#.........
...................#.....#...................................................................#.........#.........#..........................
............................................#.....#............#..................................#.........#................#..............
AOC

# input = <<-AOC
# ...#......
# .......#..
# #.........
# ..........
# ......#...
# .#........
# .........#
# ..........
# .......#..
# #...#.....
# AOC



input = input.split("\n").map(&:chars)


galaxies = Set.new

input.each_with_index do |row, ridx|
  row.each_with_index do |val, cidx|
    galaxies.add([cidx, ridx]) if val == "#"
  end
end

puts galaxies.to_s
blank_rows =[]
blank_colums = []
input.count.times do |i|
  blank = true

  input.each do |row|
    blank = false if row[i] != '.'
  end

#    v  v  v
#  ...#...... (3,0) ->  1000003, 0
#  .......#.. (7,1) ->  2000007, 1
#  #.........
# >..........<
#  ......#...
#  .#........
#  .........# (9,6)
# >..........<
#  .......#..
#  #...#.....
#    ^  ^  ^

#    v  v  v
#  ...#...... (3,0) ->  1000003, 0
#  .......#.. (7,1) ->  2000007, 1
#  #.........
# >..........<
#  ......#...
#  .#........
#  .........# (9,6)
# >..........<
#  .......#..
#  #...#.....
#    ^  ^  ^

  blank_colums.push(i) if blank

  if input[i].uniq.count == 1
    blank_rows.push(i)
  end
end

@val = 999_999
blank_colums.each_with_index do |loc, idx|
  galaxies.map {
    puts "idx #{idx}: #{_1[0].to_s.last.to_i} > #{loc}: loc: #{loc}"

    if (_1[0] % @val) > loc
      _1[0] = _1[0] + @val
    end
    _1
  }

    # r.insert(loc+(idx*1_000_000), ".")
end

blank_rows.each_with_index do |loc, idx|
  galaxies.map {
    if (_1[1] % @val) > loc
      _1[1] = _1[1] + @val
    end
  _1
  }
end

puts blank_colums.to_s
puts blank_rows.to_s
puts galaxies.to_s


# input.each_with_index do |row, ridx|
#   row.each_with_index do |val, cidx|
#     galaxies.add([cidx, ridx]) if val == "#"
#   end
# end

distances = {}

galaxies.each do |elem|
  # binding.pry

  neighbors = galaxies.dup.to_a
  neighbors.delete(elem)
  neighbors.each do |n|
    nme = [elem, n].sort.flatten.join("-")

    distances[nme] ||= ([elem[0], n[0]].max - [elem[0], n[0]].min) + [elem[1], n[1]].max - [elem[1], n[1]].min
  end
end

puts distances.to_s

# puts distances
puts distances.values.sum


